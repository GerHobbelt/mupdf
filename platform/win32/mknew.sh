#! /bin/bash

mknewproj() {
  echo "mknewproj: $1"
  libname=$( echo lib$1 | sed -e 's/^liblib/lib/' -e 's/lib$//i' )
  if ! test -f $1.vcxproj -o -f $libname.vcxproj ; then
	  cp -n libcpuid.vcxproj $libname.vcxproj
	  node ./patch-vcxproj.js $libname.vcxproj
	  node ./refill-vcxproj.js $libname.vcxproj
	  ( node ./mk_project_line_for_sln.js $libname.vcxproj ) >> m-dev-list.sln
  fi	  
}

mknewAPPproj() {
  echo "mknewAPPproj: $1"
  libname=$1
  if ! test -f $libname.vcxproj ; then
	  cp -n mutool.vcxproj $libname.vcxproj
	  node ./patch-vcxproj.js $libname.vcxproj
	  node ./refill-vcxproj.js $libname.vcxproj
	  ( node ./mk_project_line_for_sln.js $libname.vcxproj ) >> m-dev-list.sln
  fi
}



mylist=$( 
cat <<EOT

xtensor
xtensor-blas
xtensor-io
mlpack
rapidJSON
hunspell
hunspell-hyphen
math-atlas
opencv
unicode-cldr
unicode-icu
dlib
MITIE-nlp
yyjson
tre
hyperscan
clipp
hocr-spec
hocr-tools
hocr-fileformat
BLAKE3
cryptopp
sqlite
libwebp
libgif
upskirt-markdown
pthread-win32
jasper
lz4
opencv_contrib
libzmq
re2
glob
libvips
googletest
jpeg-xl
libjpeg-turbo
XMP-Toolkit-SDK
libexpat
xsimd
xtl
json
sqlite-amalgamation
QuickJS
ECMA262
libtuv
http-parser
picohttpparser
libsvm
thunderSVM
fmt
xml-pugixml
json-jansson
yara-pattern-matcher
HDiffPatch
dtl-diff-template-library
google-diff-match-patch
txiki.js
libxml2
gumbo-libxml
libarchive
svg-charter
tinyexpr
c-blosc2
boost
libwebsockets
mcmc
mmc
mipp
djvulibre
zstd
libwebsocketpp
websocket-sharp
crow
lda
lda-Familia
lda-bigartm
LightLDA
CHM-lib
lib_nas_lockfile
mht-rip
shoco
lapack
openssl
oneTBB
mimetic
libzip
gumbo-query
pytorch
glog
replxx
tidy-html5
pmt-png-tools
ScriptX
QuickJS-C++-Wrapper
libconfig
OptimizationTemplateLibrary
otl
brotli
tomlpp
plf_nanotimer
mime-mega
file
libyaml
lmdb
tlx-btree
cpp-btree
libcmime
gflags
libidn2
uint128_t
cereal
parallel-hashmap
tlx
palmtree
jemalloc
gbenchmark
resumable-assert
bibutils
bibtex-robust-decoder
efsw
url
breakpad
libqrencode
tiny-process-library
Lightning.NET
lmdb-store
lmdb-safe
lmdb.spreads.net
createprocess-windows
messagebox-windows
spy-build-sysinfo
cli11
clBLAS
pcg-c-random
stdext-path
lmdbxx
libcpuid
thread-pool-cpp
sparsehash
ncnn
xxHash
cpuinfo
thread-pool
thread-pool-c
sentencepiece
sentence-tokenizer
you-token-to-me
libtextcat
uctodata
ucto
libfolia
fastBPE
libunifex
libscanf
magic_enum
hedley
expected-lite
many-stop-words
stopwords
wget
cppzmq
linenoise
libmdbx
subprocess
taskflow
frozen
cmph-hasher
libbloom
cuckoofilter
cuckoo-index
morton_filter
caffe
BCF-cuckoo-index
DCF-cuckoo-index
ligra-graph
emphf-hash
gperf-hash
phf-hash
BBHash
catboost
LDCF-hash
civetweb
proxygen
webview
wxWidgets
pcre
nanosvg
neutralinoJS
neutralinoJS-CLI
wxCharts
GMMreg
liblinear
hmm-scalable
hmm-stoch
GMM-HMM-kMeans
libCZMQ
libbf
photino.native
wxFormBuilder
scintilla
enkiTS-TaskScheduler
promise-cpp
libq
prio_queue
google-marl
ticpp
asynqro
CacheLib
WinHttpPAL
fastText
BlingFire
mimalloc
snmalloc
scantailor
sqlite3pp
wxPDFView
hypertextcpp
uberlog
wxWebViewChromium
tsf
filesystem
cxxtest_catch_2_gtest
QuickJS-C++-Wrapper2
binlog
CImg
wxMEdit
libgd
CxImage
VisualScriptEngine
wxVisualScriptEngine
wxSQLite3
wxExamples
libwarc
warc2text
preprocess-corpuses
cld2-language-detect
uchardet
libpsl
upscaledb
manticore-columnar
manticoresearch
manticore-plugins
libstemmer
snowball
csync2
librsync
SQLiteCpp
libcyaml
libyaml-examples
libfyaml
yaml-test-suite
yaml-cpp
rapidyaml
smhasher
circlehash
htmlstreamparser
zsync2
libcpr
glib2
fast_pfor
multiverso
lda-3-variants
gibbs-lda
portable-memory-mapping
libmio
libvrb
fmtlog
libcnl
libucl
libquill
NanoLog
libwil
libzopfli
libwildmatch
libsqlfs
sqlean
sqlite-stats
SQLiteHistograms
sqlite-fts5-snowball
sqlite_wrapper
velocypack
libdeflate
libCRCpp
ms_cpp_client_telemetry
krabsETW
tracelogging-for-ETW
typesense
dtoa-benchmark
Extensible-Storage-Engine
pthreadpool
lrucache11
CTPL-Thread-Pool
ThreadPool
portable_concurrency-std-future
YACLib
promise-hpp
taolog
opentelemetry-cpp
TraceETW
Sealighter
Windows10EtwEvents
SilkETW
microsoft-performance-toolkit-sdk
pelikan
oppat
compact_enc_det
tink
highwayhash
kgraph
nanoflann
hnswlib
nmslib
annoy
libngt-ann
libsptag
CTCWordBeamSearch
faiss
xgboost
pisa
nsync
randen
zfp-compressed-arrays
random
wyhash
xnnpack
merror
kahypar
flat_hash_map
pagerank
graphit
libgrape-lite
concurrencpp
lerc
stx-error-handling
result-cpp
delegate
robin-map
hopscotch-map
ocreval
asio
highway
tinycolormap
tesseract-gImgRdrGui
pdf2htmlEX
bhtsne--Barnes-Hut-t-SNE
pcg-cpp-random
cpp-ipc
userver
PhotonLibOS
coost
libstb
bolt
concurrentqueue
libimagequant
palanteer
iceoryx
ecal
recycle
tcp_pubsub
DBoW2
warp-ctc
OpenFST
dynet
tensorflow
libchardet
line_detector
refl-cpp
zpp_bits
cppflow
utfcpp
fast_float
libcopp
boost-url
gdbm
pevents
win32-dpi
libiconv
horsejs
dirent
swig
cpp_rest_sdk
infoware
libassert
libicns
friso
winflexbison
jq
restc-cpp
libaco
tinn
libcsp
CRoaring
subprocess_h
nameof
libclipboard
librs232
caches
warpLDA
ccv-nnc
localmemcache
libdist
zsv
sqlite_zstd_vfs
libeternaltimestamp
libxslt
tvision
bibtool
zotero-translators
citeproc-js
citation-journals
citation-styles
zotero-standalone-build
zotero-web-library
zotero
zotero-connectors
zotero-word-for-windows-integration
zotero-libreoffice-integration
zotero-translation-server
zotero-bib
zotero-translate
zotero-google-docs-integration
zotero-build
JabRef-Browser-Extension
JabRef-abbreviations
citation-abbreviations
npoi
html2openxml
ShapeCrawler
OfficeIMO
b2xtranslator
Open-XML-SDK
MariGold.OpenXHTML
docxBox
zotero-scholar-citations
zotero-shortdoi
papis-zotero
zotero-zotfile
notcurses
zotero-better-bibtex
xsldbg
ceres-solver
stateline
cppjieba
monolith
PGM-index
iresearch
pHash
phash-gpl
ssimulacra2
arangodb
completesearch
qlever
midas
pytorch_cpp_demo
LightGBM
StarSpace
sqlite_fts_tokenizer_chinese_simple
libcppjieba
pinyin
libpinyin
libcsv2
csv-parser
mammut
Cysboard
diffutils
gtn
OpenFST-utils
sqlite3-compression-encryption-vfs
nativefiledialog-extended
jsoncons
rclone
mysql-connector-cpp
exiv2
openpbs
pybind11
RxCpp
zxing-cpp
statsite
QCBOR
libcbor
tinycbor
pcm
safestringlib
libjxl
libheif
oiio
libheif-alt
libde265
libaom
variadic_table
libmobi
stringi
tinygettext
gettext
libfort
libevt
date
datetimepp
dateutils
cctz
ion-c
libsmile
eventpp
universal-numbers
libsigcplusplus
Signals
percona-server
comdb2-bdb
cpython
sqleet
sqlcipher
argparse
sqlpp11
mydumper
GoldFish-CBOR
indicators
VQMT
spdlog
spdlog_setup
cpptoml
toml11
folly
BoxFort
debugbreak
Criterion
tabulate
portable-snippets
salieri
honggfuzz
rsync
unpaper
shadesmar
libuv
ucx

EOT
)

myapplist=$( 
cat <<EOT

h2o-server
drogon
GraphicsMagick
ImageMagick
bebop
olena
UIforETW
EtwExplorer

EOT
)

if true ; then 
	for f in  $mylist  ; do
	  mknewproj $f
	done
fi

if true ; then
	for f in  $myapplist  ; do
	  mknewAPPproj $f
	done
fi

for f in *.vcxproj ; do
	echo "Updating $f..."
	./update-vcxproj.sh $f
done


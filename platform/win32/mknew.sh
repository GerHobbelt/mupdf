#! /bin/bash


if [ -z "$1" ] ; then
	ARG="3"
else
	ARG="$1"
fi

if [ -z "$2" ] ; then
	FILTER=.
else
	# WARNING: this is used as a regex, so reckon with special behaviour for $^.*+?[]
	#
	# The brutal fix we employ here is to nuke everything at or after the first regex operator
	#
	#echo "$2" | sed -E -e 's/[ \t\r\n.*+\[\]\(\)?].*$//'    -- somehow barfs on the ] in the [..] set no matter what I try for escapes   :-S
	FILTER=$( echo "$2" | sed -E -e 'sX[.*+?()\[].*$XX' -e 's/-?lib$//i' )
fi


mknewproj() {
	libname=$( echo lib$1 | sed -E -e 's/^liblib/lib/i' -e 's/-?lib$//i' )
	if ! test -f $1.vcxproj ; then
		if ! test -f $libname.vcxproj ; then
			echo "mknewproj: $libname"
			cp -n libcpuid.vcxproj $libname.vcxproj
			node ./patch-vcxproj.js $libname.vcxproj
			./update-vcxproj.sh $libname.vcxproj
			./refill-vcxproj.sh $libname.vcxproj
		fi
	fi
}

mknewAPPproj() {
	libname=$1
	if ! test -f $libname.vcxproj ; then
		echo "mknewAPPproj: $libname"
		cp -n mutool.vcxproj $libname.vcxproj
		node ./patch-vcxproj.js $libname.vcxproj
		./update-vcxproj.sh $libname.vcxproj
		./refill-vcxproj.sh $libname.vcxproj
	fi
}

mknewMISCproj() {
	libname=$1
	if ! test -f $libname.vcxproj ; then
		echo "mknewMISCproj: $libname"
		cp -n collection-0.vcxproj $libname.vcxproj
		node ./patch-vcxproj.js $libname.vcxproj
		./update-vcxproj.sh $libname.vcxproj
		./refill-vcxproj.sh $libname.vcxproj
	fi
}

delnewproj() {
	libname=$1
	echo "delnewproj: $libname"
	rm ${libname}.vcxproj*   ${libname}_tests.vcxproj*   ${libname}_examples.vcxproj*   ${libname}_demos.vcxproj*   2> /dev/null
	libname=$( echo lib$1 | sed -e 's/^liblib/lib/i' -e 's/-?lib$//i' )
	rm ${libname}.vcxproj*   ${libname}_tests.vcxproj*   ${libname}_examples.vcxproj*   ${libname}_demos.vcxproj*   2> /dev/null
}

delnewproj2() {
	libname=$1
	echo "delnewproj: $libname"
	rm ${libname}.vcxproj*   ${libname}_tests.vcxproj*   ${libname}_examples.vcxproj*   2> /dev/null
}


# Anything that would, should or could (partly) serve as a library from our monolithic build perspective:

mylist=$(
(
grep -v '#' <<EOT

###### djvulibre -- already exists as libdjvu
##############.NET######## html2openxml
########.NET####### libWebP.Net

A-MNS_TemplateMatching
ADE-graph-management
AFLplusplus
ApprovalTestsCpp
ArborX
BBHash
BCF-cuckoo-index
BLAKE3
BaseMatrixOps
BayerToRGB
Bi-Sent2Vec
BitFunnel
BlingFire
BoxFort
CImg
CLBlast
CLBlast-database
CLTune
CNTK
CRFpp
CRFsuite-extended
CRoaring
CTCWordBeamSearch
CTPL-Thread-Pool
CacheLib
Capture2Text
Clipper2
Cmathtuts
ColorSpace
CppNumericalSolvers
Criterion
CryptSync
CurvatureFilter
CxImage
Cysboard
DBoW2
DCF-cuckoo-index
DGM-CRF
Digital-Halftoning
DiskANN
ECMA262
EWAHBoolArray
EigenRand
Extensible-Storage-Engine
FFmpeg
FIt-SNE
FM-fast-match
FastGlobbing
FastString
FiberTaskingLib
GMM-HMM-kMeans
GMMreg
GQ-gumbo-css-selectors
GSL
GoldFish-CBOR
HDiffPatch
Hackers-Delight
HashMap
ITK
IconFontCppHeaders
Imath
Ipopt
JabRef-Browser-Extension
JabRef-abbreviations
JamSpell
KDSPDSetup
LBFGS-Lite
LDCF-hash
LLhttp-parser
LSWMS
LightGBM
LightLDA
Lightning.NET
MITIE-nlp
MNN
MPMCQueue
MariGold.OpenXHTML
MegEngine
MicroPather
Multicore-TSNE
MultipartEncoder
NSIS-OBSInstallerUtils
NSISDotNetChecker
NSISFileCheck
NSISMultiUser
NanoLog
NiuTrans.NMT
OZBCBitmap
OfficeIMO
Open-XML-SDK
OpenBLAS
OpenCL-CTS
OpenCL-Headers
OpenCL-SDK
OpenColorIO
OpenEXR
OpenFST
OpenFST-utils
OpenImageIO
OpenNN
PEGTL
PGM-index
Paddle-Lite
PaddleClas
PaddleDetection
PaddleNLP
PaddleOCR
PaddlePaddle
PhotonLibOS
Pillow
PlatformFolders
QCBOR
QuickJS
QuickJS-C++-Wrapper
QuickJS-C++-Wrapper2
RE-flex
RNGSobol
RRD
RRPN
RapidFuzz
RectangleBinPack
RoaringBitmap
RuntimeCompiledCPlusPlus
RxCpp
SIMDString
SPSCQueue
SQLiteCpp
SQLiteHistograms
ScriptX
Sealighter
ShapeCrawler
SheenBidi
Sherwood
Signals
SilkETW
SipHash
Sophus
StarSpace
StringZilla
StronglyUniversalStringHashing
SuperString
SymSpell
TNN
TelemetrySourcerer
ThreadPool
TraceETW
URI-Encode-C
URL-Detector
VQMT
VSNASM
VTK
Verify
VisualScriptEngine
Win32_read_directory_changes
Win32_read_directory_changes_IOCP
WinHttpPAL
Windows10EtwEvents
Xoshiro-cpp
YACLib
ZLMediaKit
ZQCNN
abseil-cpp
adaptiveqf
agg
aho-corasick
aho_corasick
annoy
arangodb
argparse
armadillo
arrayfire
asio
asyncplusplus
asynqro
autodiff
avro
b2xtranslator
baobzi
basez
better-enums
bhtsne--Barnes-Hut-t-SNE
bibtool
bibutils
binary2strings
binary_search
binlog
bitrush-index
bitsery
blaze
blazingmq
blis
blitsort
bloom
bolt
boost
boost-url
boringssl
breakpad
brotli
brunsli
bustache
cachelot
caches
caffe
cairo
cairo-demos
capture-thread
catboost
cctz
ccv-nnc
cdc-file-transfer
cel-cpp
cel-spec
cereal
ceres-solver
cfgpath
chewing_text_cud
chibi-scheme
chromium-snss-parse
cilantro
circlehash
civetweb
cjose
clBLAS
cld1-language-detect
cld2-language-detect
cld3-language-detect
cli11
clipp
cmph-hasher
color-util
colormap-shaders
comdb2-bdb
compact_enc_det
completesearch
concat
concurrencpp
concurrentqueue
config-cpp
continuable
coost
cpp-httplib
cpp-ipc
cpp-netlib
cpp-terminal
cpp_rest_sdk
cppdap
cppflow
cppjieba
cpptoml
cppzmq
cpuinfo
cpython
cqf
cr
crc32c
createprocess-windows
crfsuite
crow
crumsort
cryptest
cryptlib
csv-parser
csvquote
csync2
ctsa
cuckoo-index
cuckoofilter
curl
curl-impersonate
cvmatio
cxxopts
cxxtest
datamash
date
datetimepp
dateutils
dbscan
debugbreak
decision-tree
deepdetect
delegate
density
densityxx
detect-character-encoding
diffutils
directorywatcher
dirent
dlfcn-win32
dlib
doctest
docxBox
doh
doxa
dtl-diff-template-library
dtoa-benchmark
duckdb
duktape
dynet
easyexif
easyloggingpp
ecal
edit-distance
efsw
emphf-hash
enca
ensmallen
eventpp
exiv2
expected-lite
exprtk
extract
eytzinger
fCWT
faiss
falconn
farmhash
farver-OKlab
fast-hex
fast-lzma2
fastBPE
fastPRNG
fastText
fast_double_parser
fast_float
fast_pfor
fastapprox
fastfilter_cpp
fastgron
fasthashing
fastops
fastrange
fatal
faup
ffht
fftw3
fifo_map
figcone
figtree
file
filesystem
fityk
flann
flare-floss
flashlight
flat.hpp
flat_hash_map
flinng
flip
fluent-bit
fluxsort
fmath
fmem
fmemopen_windows
fmt
fmtlog
fnmatch
folly
fontbm
fontconfig
fph-table
fpng
freeglut
freetype
fribidi
friso
frozen
fsst
fuzzy-match
fxt
g3log
gbenchmark
gcem
gdbm
gegl
gencolormap
genieclust
getopt
gettext
gflags
gibbs-lda
giflib-turbo
glfw
glib2
glm
glob
glog
glyph_name
gmic
gmic-community
gmt
gnuplot
gnuplot-palettes
gnuplot_i
google-diff-match-patch
googletest
gperf
gram_savitzky_golay
graph-coloring
graphit
groonga
gtn
gtsam
guetzli
guile
gumbo-libxml
gumbo-parser
gumbo-query
gumbo_pp
h5cpp
half
harbour-core
harfbuzz
harry
hdbscan
hdbscan-cpp
hedley
hescape
highway
highwayhash
hikyuu
hmm-scalable
hmm-stoch
hnswlib
hocr-fileformat
hocr-spec
hocr-tools
honggfuzz
hopscotch-map
houdini
hsluv-c
htmlstreamparser
http-parser
hunspell
hunspell-hyphen
hydraquill
hyperscan
hypertextcpp
iODBC
iceberghashtable
iceoryx
id3-tagparser
ifopt
imagedistance
indicators
infoware
ion-c
iresearch
itcl
itpp
ivf-hnsw
jasper
jbig2dec
jemalloc
jerryscript
jimtcl
jpeg
jpeg-xl
jpeginfo
jq
json
jsoncons
jsoncpp
jtc
kahypar
kalman-cpp
kann
kfr
kgraph
kiwi
klib
knusperli
koan
krabsETW
lapack
lcms2
lda
lda-3-variants
lda-bigartm
leptonica
leptonica-hillshade
lerc
lexbor
libCHM
libCRCpp
libCSD
libCZMQ
libXMP-Toolkit
lib_nas_lockfile
libaco
libahocorasick
libalg
libaom
libarchive
libascii
libass
libassert
libatlas
libavif
libbf
libbloom
libbloomfilters
libblosc
libboost-context
libboost-coroutine
libboost-fiber
libboost-filesystem
libboost-iostreams
libboost-locale
libboost-log
libboost-math
libboost-mpi
libboost-mpl
libboost-program_options
libboost-serialization
libboost-stacktrace
libboost-thread
libboost-wave
libboost_examples
libboost_tools
libbtree
libcbor
libchaos
libchardet
libchopshop
libclip
libclipboard
libcmime
libcnl
libconfig
libcopp
libcppjieba
libcpr
libcpuid
libcsp
libcsv2
libcuckoo
libcxxtest_catch2_2_gtest
libcyaml
libde265
libdeflate
libdi-dependency-injection
libdiagnostics
libdip
libdist
libdivide
libdivsufsort
libdjvu
libdtm
libeigen
libenkiTaskScheduler
libeternaltimestamp
libevent
libevt
libexpat
libfamilia
libfann
libffi
libfolia
libfort
libfyaml
libgateY
libgd
libgif
libgnurx
libgrape-lite
libhashmapbtree
libheif
libheif-alt
libhog
libicns
libiconv
libics
libicu
libicu_tests
libicu_tools
libidn2
libimagequant
libinsane
libintrinsics
libirwls
libjansson
libjpeg-turbo
libjxl
libkra
liblbfgs
liblinear
libmarl
libmarl_tests
libmdbx
libmegamime
libmetalink
libmio
libmlpp
libmobi
libmodbus
libngt-ann
libnop
liboauth2
libocca
libpano13
libparameters
libpathutils
libpillowfight
libpinyin
libpipeline
libpmemobj-cpp
libpng
libpopcnt
libprecog
libpromise
libpsd
libpsl
libq
libqrencode
libraqm
librobust-bibtex
librs232
librsync
libscanf
libserialport
libshmcache
libsigcplusplus
libsiridb
libsl3
libsmile
libsptag
libsql
libsqlfs
libstb
libstemmer
libsvgcharter
libsvm
libtbb
libtextcat
libtidyhtml
libtiff
libtoml
libtorch
libtuv
libucl
libuint128
libuint128_tests
libunibreak
libunifex
libupskirt
libusb
libuv
libvcopy
libvips
libvrb
libwarc
libwebp
libwebsocketpp
libwebsockets
libwil
libwildmatch
libxbr-standalone
libxcam
libxml2
libxo
libxslt
libyaml
libyaml-examples
libzip
libzmq
libzopfli
ligra-graph
line_detector
linecook
linenoise
lizard
lmdb
lmdb-safe
lmdb-store
lmdb.spreads.net
lmdbxx
lnav
localmemcache
lockfree
loguru
lol
lolremez
lru_cache
lrucache11
lshbox
luple
lz4
lzham_codec
mace
magic_enum
magsac
mammut
manticore
manticore-columnar
manticore-plugins
marian
mathtoolbox
matplotplusplus
mcmc
mecab
mechascribe
memory
merror
mesh-allocator
messagebox-windows
mht-rip
microsoft-performance-toolkit-sdk
midas
mimalloc
mimetic
minifb
miniscript
minizip-ng
mipp
mitlm
mlinterp
mlpack
mmc
mmkv
modbus-esp8266
monolith
morton_filter
mosquitto
mozjpeg
mrpt
ms_cpp_client_telemetry
mujs
multiverso
mutable_rank_select
mxnet
mydumper
mysql-connector-cpp
n2-kNN
nameof
nano-signal-slot
nanodbc
nanoflann
nanomsg-nng
nanosvg
nanovg-qjs
nativefiledialog-extended
ncnn
nedtries
netpbm
neutralinoJS
neutralinoJS-CLI
newlisp
nghttp3
ngrams-weighted
ngtcp2
nlopt
nmslib
notcurses
npoi
nsis-nscurl
nsis-stdutils
nsync
numero
nuspell
ocreval
oidn-OpenImageDenoise
oneDNN
online-hnsw
onnxruntime
open-vcdiff
opencv
opencv_contrib
opencv_extra
openjpeg
openlibm
openpbs
openssl
opentelemetry-cpp
opentelemetry-cpp-contrib
openvino
oppat
optim
or-tools
osqp
osqp-cpp
osqp-eigen
osquery
otl
otl-ml
owl
pHash
pagerank
palanteer
palmtree
pango
papis-zotero
paramonte
pcg-c-random
pcg-cpp-random
pcl
pcm
pcre
pdf2htmlEX
pdfgrep
pdiff
pecos
pelikan
pevents
pg_similarity
phash-gpl
phf-hash
photino.native
picoc
picohttpparser
pikchr
pillow-resize
pinyin
pipes
pisa
pisa_formatter
pixman
plf_nanotimer
pmdk
pmdk-tests
pmemkv
pmemkv-bench
png-pmt-tools-lib
poco
podofo
poisson_blend
polatory
poplar-trie
portable-memory-mapping
portable-snippets
portable_concurrency-std-future
prio_queue
probminhash
promise-hpp
protobuf
proxygen
prvhash
psd_sdk
pthread-win32
pthread-win32-EH
pthread-win32-JMP
pthread-win32-jumbo
pthreadpool
pybind11
pyclustering
pyglass
pylene
pytorch_cpp_demo
qHilbert
qjs-ffi
qjs-modules
qjs-opencv
qjs-sqlite3
qlever
qoi
qs_parse
quadsort
quantum
quickjs-ffi
quill-logging
radamsa
radon-tf
randen
random
random-forest
rapidJSON
rapidxml
rapidyaml
rclone
re2
readerwriterqueue
reckless
recycle
refl-cpp
replxx
reproc
restc-cpp
result-cpp
resumable-assert
rgf
riegeli
robin-hood-hashing
robin-map
robotstxt
rollinghashcpp
rotate
rotate_detection
rsync
rtl
ruy
safeclib
safestringlib
salieri
sally
sbcl
scantailor
scilab
scintilla
scws-chinese-word-segmentation
sdhash
sdsl-lite
see-phit
semimap
sent2vec
sentence-tokenizer
sentencepiece
sequential-line-search
serde-cpp
serdepp
shadesmar
sharedhashfile
shmdata
shoco
sile-typesetter
simd-imgproc
simdjson
sioyek
sist2
slot_map
smhasher
snap
snappy
snmalloc
snowball
somoclu
sparsehash
sparsepp
spdlog
spdlog_setup
spdlog_sqlite_sink
spdmon
spline
splinter
splitmerge
spookyhash
spy-build-sysinfo
sqawk
sqlcipher
sqlean
sqleet
sqlite
sqlite-amalgamation
sqlite-fts5-snowball
sqlite-stats
sqlite3-compression-encryption-vfs
sqlite3pp
sqlite_fts_tokenizer_chinese_simple
sqlite_wrapper
sqlite_zstd_vfs
sqliteodbc
sqlplot-tools
sqlpp11
squash
ssdeep
sse-popcount
ssimulacra2
stan
stan-math
state-threads
stateline
stats
statsite
stdext-path
stlcache
stringi
strings2
strtk
stx-error-handling
subprocess
subprocess-cpp
subprocess_h
sumatrapdf
swig
tabulate
taglib
tao-json
taolog
tapkee
taskflow
tcl
tclap
tclclockmod
tcllib
tcp_pubsub
tcpshm
tee-win32
telegram-bot-api
telegram-td
tensorflow
tensorflow-docs
tensorflow-io
tensorflow-text
tensorstore
termcolor
tesseract
tesseract-gImgRdrGui
tesslinesplit
text-wrangler
textflowcpp
theoretica
thread-pool
thread-pool-c
thread-pool-cpp
thrift
thunderSVM
ticpp
tink
tink-cc
tinn
tiny-process-library
tiny-utf8
tinycbor
tinycolormap
tinydir
tinyexpr
tinyexr
tinygettext
tinynurbs
tinyspline
tlx
tlx-btree
tmap
toml11
tracelogging-for-ETW
transwarp
tray
tre
treelite
tsf
tvision
twain_library
tweeny
txiki.js
typesense
u8_to_std_string
uberlogger
uchardet
ucto
uctodata
ucx
ugrep
unblending
unicode-cldr
units
universal-numbers
unixODBC
uno-solver
unpaper
unqlite
unsmear
upscaledb
upskirt
url
url-parser
userver
utf8proc
utfcpp
variadic_table
velocypack
vizzu
vmaf 
vmem
vmemcache
vtm
vxl
waifu2x-ncnn-vulkan
warc2text
warp-ctc
warpLDA
wavelib
wcwidth9
wdenoise
websocket-sharp
webview
wget
wget2
wil-Win32-Interface-Library
win-iconv
win32-dpi
winflexbison
word2vec
word2vec-GloVe
wxCharts
wxCurl
wxDatabase
wxExamples
wxFormBuilder
wxMEdit
wxPDFView
wxPdfDocument
wxSQLite3
wxVisualScriptEngine
wxWebViewChromium
wxWidgets
wyhash
xbrzscale
xdelta
xgboost
xlnt
xml-pugixml
xnnpack
xor-and-binary-fuse-filter
xpdf
xsg
xsimd
xsldbg
xtensor
xtensor-blas
xtensor-io
xtl
xxHash
yaml-cpp
yaml-test-suite
yara-pattern-matcher
yasl
yggdrasil-decision-forests
you-token-to-me
yyjson
zfp-compressed-arrays
zlibxtensor
zpp_bits
zstd
zsv
zsync2
zxing-cpp

AudioFile
BehaviorTree.CPP
ColorMagic
DBow3
DP_means
EasyOCR
EasyOCR-cpp
GraphBLAS
InferenceHelper
K-Medoids-Clustering
L1Flattening
LMW-tree
LSHBOX
LZMA-Vizualizer
OTB
OpenCP
RAKE
SZ
SZ3
Shifted-Hamming-Distance
Solo
SuiteSparse
SymspellCPP
backward-cpp
bplustree
brown-cluster
cppsimhash
cpu_features
darknet
dashing
dkm
dr_libs
fast-kmeans
fbow
flac
flatton-offline
g2o
krita
libase
libcluster
libsndfile
lterpalettefinder
mapreduce
mcmc-jags
minhash_clustering
minimp3
nanogui
nlopt-util
ocr_eval_tools
opus
paintingReorganize
pfp-cst
pke
puffinn
pytorch_cluster
qoa
re2c
retinex
rttr
sac
silk-codec
silk-v3-decoder
simhash-cpp
speex
spherical-k-means
tlsh
unilib
usearch
we-love-colors
worde_butcher
xcdat
xmunch
yake
yy_color_convertor
zvec
colm
ragel
libpostal
simdcomp
PDFGen
lmfit
cv-VanishingPoint
FFME
InversePerspectiveMapping
libchiaroscuramente

QALSH
QALSH_Mem
RandomizedRedundantDCTDenoising
amd-fftw
butteraugli
efftw
epeg
ffts
hilbert_hpp
icer_compression
ikd-Tree
imagehash
jpeg2dct
kissfft
learnopencv
libInterpolate
libjpegqs
libkdtree
libzint
nanoflann_dbscan
nfft
pico_tree
piposort
r8brain-free-src
wolfsort
hilbert_curves
libhilbert
tiny-dnn
1D-RGB-color-gradient
2D-color-gradient-or-Procedural-texture

ModernCppStarter
QuantLib
Quant

WinToast
clp
design-patterns-cpp
djvulibre
html2openxml
libharry
mcmd
onnxruntime-extensions
onnxruntime-genai
oof
openalpr
ormpp
tab
trng4
u8g2
uvw

EOT
) | grep -e "$FILTER"
)

# Anything that will end up as an application, even when regarded from our monolithic buil perspective

myapplist=$(
(
grep -v '#' <<EOT

#sdcc

EtwExplorer
FreeFileSync
GraphicsMagick
IdGenerator
ImageMagick
UIforETW
WebView2Browser
WebView2Samples
bbe
bebop
calibre
capnproto
cpplocate
cryptest
ex-leptonica-freetype-harfbuzz
filecopyex3
fontview
fswatch
gnuplot
gperf
grok-jpeg2000
horsejs
jbig2enc
jpegview
loki
lzbench
manticore
metalink-cli
metalink-mini-downloader
netdata
nsis
ogdf
olena
omaha
p7zip
pikchr
png-pmt-tools
qpdf
radamsa
siridb-server
sumatrapdf
tempo
text-wrangler
thrift
tidyhtml
tray
vcopy
vcpkg
visible-url-detector
ragel

binary_bakery
mcmd
sdcc
remake

EOT
) | grep -e "$FILTER"
)

# Anything else, that's not really code we'll be incorporating in the form of a library or application. Data, documentation, etc.:

misclist=$(
(
grep -v '#' <<EOT

LeptonicaDocsSite
UnofficialLeptDocs
archive-hocr-tools
awesome-c
calibre
citation-abbreviations
citation-journals
citation-styles
citeproc-js
curl-www
doxygen-awesome-css
everything-curl
hsluv-color-gradient
html5lib-tests
hunspell-dictionaries
ipa-dict
javascript-serialization-benchmark
langdata_LSTM
libprecog-data
libprecog-manuals
many-stop-words
mupdf_explored
podofo
preprocess-corpuses
pyclustering
stopwords
tensorflow-docs
tessconfigs
tessdata
tessdata_best
tessdata_contrib
tessdata_fast
tessdoc
tesseract_api_docs
tesseract_docs
tesseract_langdata
tesseract_ocr_test
tesstrain
unicode-cldr-data
unicode-icu-data
unicode-icu-demos
wordfreq
wordfrequency

ColorPaletteCodable
DocLayNet
MetBrewer
PNWColors
Sancho.Panza.on.tesseract.OCR
openexr-images
wesanderson
local_adaptive_binarization
Awesome-Image-Quality-Assessment
Awesome-Document-Image-Rectification
IMGUR5K-Handwriting-Dataset
tesseract-ocr-mailing-list-archive
tesseract-dev-mailing-list-archive

EOT
) | grep -e "$FILTER"
)

# projects which use names different from their actual storage directory; see also update-cvxproj.js script's mapping table:

deletelist=$(
grep -v '#' <<EOT

CHM-lib
OptimizationTemplateLibrary
XMP-Toolkit-SDK
bibtex-robust-decoder
c-blosc2
cef-pdf
cpp-btree
cryptopp
cxxtest_catch_2_gtest
drogon
enkiTS-TaskScheduler
google-marl
gperf-hash
h2o-server
json-jansson
lda-Familia
libQuickJSpp
libQuickJSpp2
libchm_io
libdjvu_io
libdjvulibre
libdtldiff
libgdiff
libhdiff
liboiio
libquill
manticoresearch
math-atlas
mime-mega
oneTBB
parallel-hashmap
pdfium
pmt-png-tools
poppler
promise-cpp
pytorch
svg-charter
tidy-html5
tomlpp
uberlog
uint128_t
unicode-icu
upskirt-markdown
zotero
zotero-better-bibtex
zotero-bib
zotero-build
zotero-connectors
zotero-google-docs-integration
zotero-libreoffice-integration
zotero-scholar-citations
zotero-shortdoi
zotero-standalone-build
zotero-translate
zotero-translation-server
zotero-translators
zotero-web-library
zotero-word-for-windows-integration
zotero-zotfile
oiio

EOT
)

deletelist2=$(
grep -v '#' <<EOT

libYACLib
libnmslib
libhnswlib
libsafestringlib
libCacheLib

EOT
)


if false ; then
	echo "--------------------------------------------------"
	echo "mylist=$mylist"
	echo "--------------------------------------------------"
	echo "myapplist=$myapplist"
	echo "--------------------------------------------------"
	echo "misclist=$misclist"
	echo "--------------------------------------------------"
	echo "deletelist=$deletelist"
	echo "--------------------------------------------------"
	echo "deletelist=$deletelist2"
	echo "--------------------------------------------------"
fi


if [ "$FILTER" = "." ] ; then
	WILDCARD="*"
else
	WILDCARD="*$FILTER*"
fi


# debugging:
if false ; then
	echo "FILTER: $FILTER"
	echo "WILDCARD: $WILDCARD"
	echo "ARG: $ARG"
fi


if [[ "$ARG" =~ [1] ]] ; then
	for f in  $mylist  ; do
		#if ( shopt -s nocasematch ; [[ $f =~ $FILTER ]] ) ; then
			mknewproj $f
		#fi
	done
fi

if [[ "$ARG" =~ [2] ]] ; then
	for f in  $myapplist  ; do
		#if ( shopt -s nocasematch ; [[ $f =~ $FILTER ]] ) ; then
			mknewAPPproj $f
		#fi
	done

	for f in  $misclist  ; do
		#if ( shopt -s nocasematch ; [[ $f =~ $FILTER ]] ) ; then
			mknewMISCproj $f
		#fi
	done
fi

if [[ "$ARG" =~ [12] ]] ; then
	# and only now do we add all those generated project files to the overview solution!
	# we do this brute-force by simply adding ALL projects to that solution again; the next
	# load by Visual Studio will clean up the .sln file for us.
	echo "augment MSVC solution 'm-dev-list.sln' by adding all known *$FILTER* projects..."
	(
		for f in $( ls *.vcxproj | tr -d '\r' | grep -i -e "$FILTER" ) ; do
			node ./mk_project_line_for_sln.js $f
		done
	) >> m-dev-list.sln
fi

if [[ "$ARG" =~ [3] ]] ; then
	for f in $( ls *.vcxproj | tr -d '\r' | grep -i -e "$FILTER" ) ; do
		echo "Updating $f..."
		./update-vcxproj.sh $f
	done
fi

if [[ "$ARG" =~ [4] ]] ; then
	for f in $( ls *.vcxproj | tr -d '\r' | grep -i -e "$FILTER" ) ; do
		echo "Refilling $f..."
		./refill-vcxproj.sh $f
	done
fi

if [[ "$ARG" =~ [0] ]] ; then
	for f in  $deletelist  ; do
	  delnewproj $f
	done
	for f in  $deletelist2  ; do
	  delnewproj2 $f
	done
fi

